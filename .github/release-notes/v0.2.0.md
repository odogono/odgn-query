# odgn-query v0.2.0 — 2025-10-01

## Highlights

- refetchQueries now re-executes the stored query function and updates the cache value and TTL for each key.
- New concurrency option for refetchQueries to control parallelism.
- CacheAdapter.findMatchingKeys may be async. Redis and SQLite adapters now implement it, enabling prefix and predicate refetch.
- Query function registry in QueryClient ensures refetch works across adapters that don’t persist queryFn.

## Changes

### Added

- Refetch cache update + TTL refresh on success.
- Refetch concurrency: `refetchQueries(matcher, { concurrency })`.
- Async `findMatchingKeys` support on adapters.
- `RefetchOptions` and `RefetchResult` exported from the package.
- Tests for cache update after refetch and concurrency behavior.

### Changed

- Default refetch behavior runs in parallel; when `throwOnError: true`, it runs sequentially and throws on the first error.
- In-memory LRU `set()` preserves existing `queryFn`, keeping refetch available after manual `set`.

### Docs & Examples

- README: new Refetching and API sections; adapter examples for prefix/predicate refetch; typed usage.
- Examples (LRU/Redis/SQLite): demonstrate refetch and typed results.

## Upgrade Notes

- Adapter authors: `findMatchingKeys` may be async. Implement it to enable prefix/predicate on your adapter (exact key lists work without it).
- Behavior change: refetch now updates cached values and refreshes TTL (previously did not update cache).
